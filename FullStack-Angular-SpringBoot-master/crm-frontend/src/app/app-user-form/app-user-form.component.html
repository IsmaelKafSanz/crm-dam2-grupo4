<h1>ğŸ‘¤ User Form</h1>

<div class="container">
    <div class="alert alert-warning" *ngIf="userForm.dirty && userForm.invalid">Please, type valid inputs!</div>
    <div class="alert alert-warning" *ngIf="userForm.dirty && username?.invalid">Username is required (min 3
        characters)!</div>
    <div class="alert alert-warning" *ngIf="userForm.dirty && email?.invalid">Please, type a valid email!</div>
    <div class="alert alert-warning" *ngIf="isNewUser && userForm.dirty && password?.invalid">Password is required (min
        6 characters)!</div>

    <form (ngSubmit)="!userForm.invalid && onSave()" #userForm="ngForm">
        <fieldset class="form-group">
            <label>Username *</label>
            <input type="text" #username="ngModel" [(ngModel)]="user.username" class="form-control" name="username"
                required minlength="3" placeholder="Enter username" [readonly]="!isNewUser">
            <small *ngIf="!isNewUser" class="form-text text-muted">Username cannot be changed</small>
        </fieldset>

        <fieldset class="form-group">
            <label>Password {{isNewUser ? '*' : '(leave empty to keep current)'}}</label>
            <input type="password" #password="ngModel" [(ngModel)]="user.password" class="form-control" name="password"
                [required]="isNewUser" minlength="6" placeholder="Enter password">
            <small class="form-text text-muted">
                {{isNewUser ? 'Minimum 6 characters' : 'Leave empty to keep current password'}}
            </small>
        </fieldset>

        <fieldset class="form-group">
            <label>Full Name *</label>
            <input type="text" #name="ngModel" [(ngModel)]="user.name" class="form-control" name="name" required
                minlength="2" placeholder="Enter full name">
        </fieldset>

        <fieldset class="form-group">
            <label>Email *</label>
            <input type="email" #email="ngModel" [(ngModel)]="user.email" class="form-control" name="email" required
                email placeholder="Enter email address">
        </fieldset>

        <fieldset class="form-group">
            <div class="form-check">
                <input type="checkbox" [(ngModel)]="user.enabled" class="form-check-input" name="enabled" id="enabled">
                <label class="form-check-label" for="enabled">
                    Account Active
                </label>
            </div>
            <small class="form-text text-muted">Inactive users cannot log in</small>
        </fieldset>

        <div class="form-group">
            <button type="submit" class="btn btn-success" [disabled]="userForm.invalid">
                ğŸ’¾ Save
            </button>
            <button type="button" class="btn btn-secondary ml-2" routerLink="/app-users">
                âŒ Cancel
            </button>
        </div>
    </form>
</div>

<style>
    .ml-2 {
        margin-left: 0.5rem;
    }

    .form-check {
        padding-left: 1.5rem;
    }

    .form-check-input {
        margin-top: 0.3rem;
    }
</style>